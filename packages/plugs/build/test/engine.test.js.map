{"mappings":"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","sources":["packages/plugs/query/engine.test.ts","packages/plugs/query/engine.ts","packages/common/tree.ts","packages/common/parse_tree.ts","packages/plugs/query/parse-query.js","packages/plugos-silverbullet-syscall/space.ts","packages/plugos-silverbullet-syscall/syscall.ts","packages/plugs/core/dates.ts","packages/plugos-silverbullet-syscall/editor.ts"],"sourcesContent":["import { expect, test } from \"@jest/globals\";\nimport { applyQuery, parseQuery } from \"./engine\";\n\ntest(\"Test parser\", () => {\n  let parsedBasicQuery = parseQuery(`page`);\n  expect(parsedBasicQuery.table).toBe(\"page\");\n\n  let parsedQuery1 = parseQuery(\n    `task where completed = false and dueDate <= \"{{today}}\" order by dueDate desc limit 5`\n  );\n  expect(parsedQuery1.table).toBe(\"task\");\n  expect(parsedQuery1.orderBy).toBe(\"dueDate\");\n  expect(parsedQuery1.orderDesc).toBe(true);\n  expect(parsedQuery1.limit).toBe(5);\n  expect(parsedQuery1.filter.length).toBe(2);\n  expect(parsedQuery1.filter[0]).toStrictEqual({\n    op: \"=\",\n    prop: \"completed\",\n    value: false,\n  });\n  expect(parsedQuery1.filter[1]).toStrictEqual({\n    op: \"<=\",\n    prop: \"dueDate\",\n    value: \"{{today}}\",\n  });\n\n  let parsedQuery2 = parseQuery(`page where name =~ /interview\\\\/.*/\"`);\n  expect(parsedQuery2.table).toBe(\"page\");\n  expect(parsedQuery2.filter.length).toBe(1);\n  expect(parsedQuery2.filter[0]).toStrictEqual({\n    op: \"=~\",\n    prop: \"name\",\n    value: \"interview\\\\/.*\",\n  });\n\n  let parsedQuery3 = parseQuery(`page where something != null`);\n  expect(parsedQuery3.table).toBe(\"page\");\n  expect(parsedQuery3.filter.length).toBe(1);\n  expect(parsedQuery3.filter[0]).toStrictEqual({\n    op: \"!=\",\n    prop: \"something\",\n    value: null,\n  });\n\n  expect(parseQuery(`page select name`).select).toStrictEqual([\"name\"]);\n  expect(parseQuery(`page select name, age`).select).toStrictEqual([\n    \"name\",\n    \"age\",\n  ]);\n\n  expect(\n    parseQuery(`gh-events where type in [\"PushEvent\", \"somethingElse\"]`)\n  ).toStrictEqual({\n    table: \"gh-events\",\n    filter: [\n      {\n        op: \"in\",\n        prop: \"type\",\n        value: [\"PushEvent\", \"somethingElse\"],\n      },\n    ],\n  });\n\n  expect(parseQuery(`something render \"template/table\"`)).toStrictEqual({\n    table: \"something\",\n    filter: [],\n    render: \"template/table\",\n  });\n});\n\ntest(\"Test performing the queries\", () => {\n  let data: any[] = [\n    { name: \"interview/My Interview\", lastModified: 1 },\n    { name: \"interview/My Interview 2\", lastModified: 2 },\n    { name: \"Pete\", age: 38 },\n    { name: \"Angie\", age: 28 },\n  ];\n\n  expect(\n    applyQuery(parseQuery(`page where name =~ /interview\\\\/.*/`), data)\n  ).toStrictEqual([\n    { name: \"interview/My Interview\", lastModified: 1 },\n    { name: \"interview/My Interview 2\", lastModified: 2 },\n  ]);\n  expect(\n    applyQuery(\n      parseQuery(`page where name =~ /interview\\\\/.*/ order by lastModified`),\n      data\n    )\n  ).toStrictEqual([\n    { name: \"interview/My Interview\", lastModified: 1 },\n    { name: \"interview/My Interview 2\", lastModified: 2 },\n  ]);\n  expect(\n    applyQuery(\n      parseQuery(\n        `page where name  =~ /interview\\\\/.*/ order by lastModified desc`\n      ),\n      data\n    )\n  ).toStrictEqual([\n    { name: \"interview/My Interview 2\", lastModified: 2 },\n    { name: \"interview/My Interview\", lastModified: 1 },\n  ]);\n  expect(applyQuery(parseQuery(`page where age > 30`), data)).toStrictEqual([\n    { name: \"Pete\", age: 38 },\n  ]);\n  expect(\n    applyQuery(parseQuery(`page where age > 28 and age < 38`), data)\n  ).toStrictEqual([]);\n  expect(\n    applyQuery(parseQuery(`page where age > 30 select name`), data)\n  ).toStrictEqual([{ name: \"Pete\" }]);\n\n  expect(\n    applyQuery(parseQuery(`page where name in [\"Pete\"] select name`), data)\n  ).toStrictEqual([{ name: \"Pete\" }]);\n});\n","import {\n  collectNodesOfType,\n  findNodeOfType,\n  ParseTree,\n  replaceNodesMatching,\n} from \"@silverbulletmd/common/tree\";\nimport { lezerToParseTree } from \"@silverbulletmd/common/parse_tree\";\nimport Handlebars from \"handlebars\";\nimport YAML from \"yaml\";\n\n// @ts-ignore\nimport { parser } from \"./parse-query\";\nimport { readPage } from \"@silverbulletmd/plugos-silverbullet-syscall/space\";\nimport { niceDate } from \"../core/dates\";\n\nexport type QueryProviderEvent = {\n  query: ParsedQuery;\n  pageName: string;\n};\n\nexport type Filter = {\n  op: string;\n  prop: string;\n  value: any;\n};\n\nexport type ParsedQuery = {\n  table: string;\n  orderBy?: string;\n  orderDesc?: boolean;\n  limit?: number;\n  filter: Filter[];\n  select?: string[];\n  render?: string;\n};\n\nexport function parseQuery(query: string): ParsedQuery {\n  let n = lezerToParseTree(query, parser.parse(query).topNode);\n  // Clean the tree a bit\n  replaceNodesMatching(n, (n) => {\n    if (!n.type) {\n      let trimmed = n.text!.trim();\n      if (!trimmed) {\n        return null;\n      }\n      n.text = trimmed;\n    }\n  });\n\n  // console.log(\"Parsed\", JSON.stringify(n, null, 2));\n\n  let queryNode = n.children![0];\n  let parsedQuery: ParsedQuery = {\n    table: queryNode.children![0].children![0].text!,\n    filter: [],\n  };\n  let orderByNode = findNodeOfType(queryNode, \"OrderClause\");\n  if (orderByNode) {\n    let nameNode = findNodeOfType(orderByNode, \"Name\");\n    parsedQuery.orderBy = nameNode!.children![0].text!;\n    let orderNode = findNodeOfType(orderByNode, \"Order\");\n    parsedQuery.orderDesc = orderNode\n      ? orderNode.children![0].text! === \"desc\"\n      : false;\n  }\n  let limitNode = findNodeOfType(queryNode, \"LimitClause\");\n  if (limitNode) {\n    let nameNode = findNodeOfType(limitNode, \"Number\");\n    parsedQuery.limit = valueNodeToVal(nameNode!);\n  }\n\n  let filterNodes = collectNodesOfType(queryNode, \"FilterExpr\");\n  for (let filterNode of filterNodes) {\n    let val: any = undefined;\n    let valNode = filterNode.children![2].children![0];\n    val = valueNodeToVal(valNode);\n    let f: Filter = {\n      prop: filterNode.children![0].children![0].text!,\n      op: filterNode.children![1].text!,\n      value: val,\n    };\n    parsedQuery.filter.push(f);\n  }\n  let selectNode = findNodeOfType(queryNode, \"SelectClause\");\n  if (selectNode) {\n    // console.log(\"Select node\", JSON.stringify(selectNode));\n    parsedQuery.select = [];\n    collectNodesOfType(selectNode, \"Name\").forEach((t) => {\n      parsedQuery.select!.push(t.children![0].text!);\n    });\n    // let nameNode = findNodeOfType(selectNode, \"Number\");\n    // parsedQuery.limit = +nameNode!.children![0].text!;\n  }\n\n  let renderNode = findNodeOfType(queryNode, \"RenderClause\");\n  if (renderNode) {\n    let renderNameNode = findNodeOfType(renderNode, \"String\");\n    parsedQuery.render = valueNodeToVal(renderNameNode!);\n  }\n\n  // console.log(JSON.stringify(queryNode, null, 2));\n  return parsedQuery;\n}\n\nfunction valueNodeToVal(valNode: ParseTree): any {\n  switch (valNode.type) {\n    case \"Number\":\n      return +valNode.children![0].text!;\n    case \"Bool\":\n      return valNode.children![0].text! === \"true\";\n    case \"Null\":\n      return null;\n    case \"Name\":\n      return valNode.children![0].text!;\n    case \"Regex\":\n      let val = valNode.children![0].text!;\n      return val.substring(1, val.length - 1);\n    case \"String\":\n      let stringVal = valNode.children![0].text!;\n      return stringVal.substring(1, stringVal.length - 1);\n    case \"List\":\n      return collectNodesOfType(valNode, \"Value\").map((t) =>\n        valueNodeToVal(t.children![0])\n      );\n  }\n}\n\nexport function applyQuery<T>(parsedQuery: ParsedQuery, records: T[]): T[] {\n  let resultRecords: any[] = [];\n  if (parsedQuery.filter.length === 0) {\n    resultRecords = records.slice();\n  } else {\n    recordLoop: for (let record of records) {\n      const recordAny: any = record;\n      for (let { op, prop, value } of parsedQuery.filter) {\n        switch (op) {\n          case \"=\":\n            if (!(recordAny[prop] == value)) {\n              continue recordLoop;\n            }\n            break;\n          case \"!=\":\n            if (!(recordAny[prop] != value)) {\n              continue recordLoop;\n            }\n            break;\n          case \"<\":\n            if (!(recordAny[prop] < value)) {\n              continue recordLoop;\n            }\n            break;\n          case \"<=\":\n            if (!(recordAny[prop] <= value)) {\n              continue recordLoop;\n            }\n            break;\n          case \">\":\n            if (!(recordAny[prop] > value)) {\n              continue recordLoop;\n            }\n            break;\n          case \">=\":\n            if (!(recordAny[prop] >= value)) {\n              continue recordLoop;\n            }\n            break;\n          case \"=~\":\n            // TODO: Cache regexps somehow\n            if (!new RegExp(value).exec(recordAny[prop])) {\n              continue recordLoop;\n            }\n            break;\n          case \"!=~\":\n            if (new RegExp(value).exec(recordAny[prop])) {\n              continue recordLoop;\n            }\n            break;\n          case \"in\":\n            if (!value.includes(recordAny[prop])) {\n              continue recordLoop;\n            }\n            break;\n        }\n      }\n      resultRecords.push(recordAny);\n    }\n  }\n  // Now the sorting\n  if (parsedQuery.orderBy) {\n    resultRecords = resultRecords.sort((a: any, b: any) => {\n      const orderBy = parsedQuery.orderBy!;\n      const orderDesc = parsedQuery.orderDesc!;\n      if (a[orderBy] === b[orderBy]) {\n        return 0;\n      }\n\n      if (a[orderBy] < b[orderBy]) {\n        return orderDesc ? 1 : -1;\n      } else {\n        return orderDesc ? -1 : 1;\n      }\n    });\n  }\n  if (parsedQuery.limit) {\n    resultRecords = resultRecords.slice(0, parsedQuery.limit);\n  }\n  if (parsedQuery.select) {\n    resultRecords = resultRecords.map((rec) => {\n      let newRec: any = {};\n      for (let k of parsedQuery.select!) {\n        newRec[k] = rec[k];\n      }\n      return newRec;\n    });\n  }\n  return resultRecords;\n}\n\nexport async function renderQuery(\n  parsedQuery: ParsedQuery,\n  data: any[]\n): Promise<string> {\n  if (parsedQuery.render) {\n    Handlebars.registerHelper(\"json\", (v) => JSON.stringify(v));\n    Handlebars.registerHelper(\"niceDate\", (ts) => niceDate(new Date(ts)));\n    Handlebars.registerHelper(\"yaml\", (v, prefix) => {\n      if (typeof prefix === \"string\") {\n        let yaml = YAML.stringify(v)\n          .split(\"\\n\")\n          .join(\"\\n\" + prefix)\n          .trim();\n        if (Array.isArray(v)) {\n          return \"\\n\" + prefix + yaml;\n        } else {\n          return yaml;\n        }\n      } else {\n        return YAML.stringify(v).trim();\n      }\n    });\n    let { text: templateText } = await readPage(parsedQuery.render);\n    let template = Handlebars.compile(templateText, { noEscape: true });\n    return template(data);\n  }\n\n  return \"ERROR\";\n}\n","export type ParseTree = {\n  type?: string; // undefined === text node\n  from?: number;\n  to?: number;\n  text?: string;\n  children?: ParseTree[];\n  // Only present after running addParentPointers\n  parent?: ParseTree;\n};\n\nexport function addParentPointers(tree: ParseTree) {\n  if (!tree.children) {\n    return;\n  }\n  for (let child of tree.children) {\n    if (child.parent) {\n      // Already added parent pointers before\n      return;\n    }\n    child.parent = tree;\n    addParentPointers(child);\n  }\n}\n\nexport function removeParentPointers(tree: ParseTree) {\n  delete tree.parent;\n  if (!tree.children) {\n    return;\n  }\n  for (let child of tree.children) {\n    removeParentPointers(child);\n  }\n}\n\nexport function findParentMatching(\n  tree: ParseTree,\n  matchFn: (tree: ParseTree) => boolean\n): ParseTree | null {\n  let node = tree.parent;\n  while (node) {\n    if (matchFn(node)) {\n      return node;\n    }\n    node = node.parent;\n  }\n  return null;\n}\n\nexport function collectNodesOfType(\n  tree: ParseTree,\n  nodeType: string\n): ParseTree[] {\n  return collectNodesMatching(tree, (n) => n.type === nodeType);\n}\n\nexport function collectNodesMatching(\n  tree: ParseTree,\n  matchFn: (tree: ParseTree) => boolean\n): ParseTree[] {\n  if (matchFn(tree)) {\n    return [tree];\n  }\n  let results: ParseTree[] = [];\n  if (tree.children) {\n    for (let child of tree.children) {\n      results = [...results, ...collectNodesMatching(child, matchFn)];\n    }\n  }\n  return results;\n}\n\n// return value: returning undefined = not matched, continue, null = delete, new node = replace\nexport function replaceNodesMatching(\n  tree: ParseTree,\n  substituteFn: (tree: ParseTree) => ParseTree | null | undefined\n) {\n  if (tree.children) {\n    let children = tree.children.slice();\n    for (let child of children) {\n      let subst = substituteFn(child);\n      if (subst !== undefined) {\n        let pos = tree.children.indexOf(child);\n        if (subst) {\n          tree.children.splice(pos, 1, subst);\n        } else {\n          // null = delete\n          tree.children.splice(pos, 1);\n        }\n      } else {\n        replaceNodesMatching(child, substituteFn);\n      }\n    }\n  }\n}\n\nexport function findNodeMatching(\n  tree: ParseTree,\n  matchFn: (tree: ParseTree) => boolean\n): ParseTree | null {\n  return collectNodesMatching(tree, matchFn)[0];\n}\n\nexport function findNodeOfType(\n  tree: ParseTree,\n  nodeType: string\n): ParseTree | null {\n  return collectNodesMatching(tree, (n) => n.type === nodeType)[0];\n}\n\n// Finds non-text node at position\nexport function nodeAtPos(tree: ParseTree, pos: number): ParseTree | null {\n  if (pos < tree.from! || pos > tree.to!) {\n    return null;\n  }\n  if (!tree.children) {\n    return tree;\n  }\n  for (let child of tree.children) {\n    let n = nodeAtPos(child, pos);\n    if (n && n.text !== undefined) {\n      // Got a text node, let's return its parent\n      return tree;\n    } else if (n) {\n      // Got it\n      return n;\n    }\n  }\n  return null;\n}\n\n// Turn ParseTree back into text\nexport function renderToText(tree: ParseTree): string {\n  let pieces: string[] = [];\n  if (tree.text !== undefined) {\n    return tree.text;\n  }\n  for (let child of tree.children!) {\n    pieces.push(renderToText(child));\n  }\n  return pieces.join(\"\");\n}\n","import type { SyntaxNode } from \"@lezer/common\";\nimport type { Language } from \"@codemirror/language\";\nimport { ParseTree } from \"./tree\";\n\nexport function lezerToParseTree(\n  text: string,\n  n: SyntaxNode,\n  offset = 0\n): ParseTree {\n  let children: ParseTree[] = [];\n  let nodeText: string | undefined;\n  let child = n.firstChild;\n  while (child) {\n    children.push(lezerToParseTree(text, child));\n    child = child.nextSibling;\n  }\n\n  if (children.length === 0) {\n    children = [\n      {\n        from: n.from + offset,\n        to: n.to + offset,\n        text: text.substring(n.from, n.to),\n      },\n    ];\n  } else {\n    let newChildren: ParseTree[] = [];\n    let index = n.from;\n    for (let child of children) {\n      let s = text.substring(index, child.from);\n      if (s) {\n        newChildren.push({\n          from: index + offset,\n          to: child.from! + offset,\n          text: s,\n        });\n      }\n      newChildren.push(child);\n      index = child.to!;\n    }\n    let s = text.substring(index, n.to);\n    if (s) {\n      newChildren.push({ from: index + offset, to: n.to + offset, text: s });\n    }\n    children = newChildren;\n  }\n\n  let result: ParseTree = {\n    type: n.name,\n    from: n.from + offset,\n    to: n.to + offset,\n  };\n  if (children.length > 0) {\n    result.children = children;\n  }\n  if (nodeText) {\n    result.text = nodeText;\n  }\n  return result;\n}\n\nexport function parse(language: Language, text: string): ParseTree {\n  let tree = lezerToParseTree(text, language.parser.parse(text).topNode);\n  // replaceNodesMatching(tree, (n): MarkdownTree | undefined | null => {\n  //   if (n.type === \"FencedCode\") {\n  //     let infoN = findNodeMatching(n, (n) => n.type === \"CodeInfo\");\n  //     let language = infoN!.children![0].text;\n  //     let textN = findNodeMatching(n, (n) => n.type === \"CodeText\");\n  //     let text = textN!.children![0].text!;\n  //\n  //     console.log(language, text);\n  //     switch (language) {\n  //       case \"yaml\":\n  //         let parsed = StreamLanguage.define(yaml).parser.parse(text);\n  //         let subTree = treeToAST(text, parsed.topNode, n.from);\n  //         // console.log(JSON.stringify(subTree, null, 2));\n  //         subTree.type = \"yaml\";\n  //         return subTree;\n  //     }\n  //   }\n  //   return;\n  // });\n  return tree;\n}\n","// This file was generated by lezer-generator. You probably shouldn't edit it.\nimport {LRParser} from \"@lezer/lr\"\nexport const parser = LRParser.deserialize({\n  version: 13,\n  states: \"&fOVQPOOOmQQO'#C^QOQPOOOtQPO'#C`OyQQO'#CkO!OQPO'#CmO!TQPO'#CnO!YQPO'#CoOOQO'#Cp'#CpO!_QQO,58xO!fQQO'#CcO#TQQO'#CaOOQO'#Ca'#CaOOQO,58z,58zO#lQPO,59VOOQO,59X,59XO#qQQO'#D`OOQO,59Y,59YOOQO,59Z,59ZOOQO-E6n-E6nO$YQQO,58}OtQPO,58|O$qQQO1G.qO%]QPO'#CrO%bQQO,59zOOQO'#Cg'#CgOOQO'#Ci'#CiO$YQQO'#CjOOQO'#Cd'#CdOOQO1G.i1G.iOOQO1G.h1G.hOOQO'#Cl'#ClOOQO7+$]7+$]OOQO,59^,59^OOQO-E6p-E6pO%yQPO'#C|O&RQPO,59UO$YQQO'#CqO&WQPO,59hOOQO1G.p1G.pOOQO,59],59]OOQO-E6o-E6o\",\n  stateData: \"&`~OiOS~ORPO~OjRO|SO!QTO!RUO!TVO~OgQX~P[ORYO~O}^O~OX_O~OR`O~OYbO~OgQa~P[OkdOsdOtdOudOvdOwdOxdOydOzdO~O{eOgTXjTX|TX!QTX!RTX!TTX~ORfO~OqgOg!SXj!SX|!SX!Q!SX!R!SX!T!SX~OXlOYlO[lOliOmiOnjOokO~O!OoO!PoOg_ij_i|_i!Q_i!R_i!T_i~ORqO~OqgOg!Saj!Sa|!Sa!Q!Sa!R!Sa!T!Sa~OquOrpX~OrwO~OquOrpa~O\",\n  goto: \"#d!TPP!UP!X!]!`!c!iPP!rP!r!r!X!w!X!X!X!z#Q#WPPPPPPPPP#^PPPPPPPPPPPPPPPPP#aRQOTWPXR]RR[RQZRRneQmdQskRxuVldkuRpfQXPRcXQvsRyvQh`RrhRtkRaU\",\n  nodeNames: \"âš  Program Query Name WhereClause LogicalExpr AndExpr FilterExpr Value Number String Bool Regex Null List OrderClause Order LimitClause SelectClause RenderClause\",\n  maxTerm: 51,\n  skippedNodes: [0],\n  repeatNodeCount: 3,\n  tokenData: \"Ap~R}X^$Opq$Oqr$srs%W|}%r}!O%w!P!Q&Y!Q!['P!^!_'X!_!`'f!`!a's!c!}%w!}#O(Q#P#Q(V#R#S%w#T#U([#U#V*q#V#W%w#W#X+m#X#Y%w#Y#Z-i#Z#]%w#]#^/y#^#`%w#`#a0u#a#b%w#b#c3Y#c#d5U#d#f%w#f#g7i#g#h:e#h#i=a#i#k%w#k#l?]#l#o%w#y#z$O$f$g$O#BY#BZ$O$IS$I_$O$Ip$Iq%W$Iq$Ir%W$I|$JO$O$JT$JU$O$KV$KW$O&FU&FV$O~$TYi~X^$Opq$O#y#z$O$f$g$O#BY#BZ$O$IS$I_$O$I|$JO$O$JT$JU$O$KV$KW$O&FU&FV$O~$vP!_!`$y~%OPu~#r#s%R~%WOy~~%ZUOr%Wrs%ms$Ip%W$Ip$Iq%m$Iq$Ir%m$Ir~%W~%rOY~~%wOq~P%|SRP}!O%w!c!}%w#R#S%w#T#o%w~&_V[~OY&YZ]&Y^!P&Y!P!Q&t!Q#O&Y#O#P&y#P~&Y~&yO[~~&|PO~&Y~'UPX~!Q!['P~'^Pk~!_!`'a~'fOs~~'kPt~#r#s'n~'sOx~~'xPw~!_!`'{~(QOv~~(VOo~~([Or~R(aWRP}!O%w!c!}%w#R#S%w#T#b%w#b#c(y#c#g%w#g#h)u#h#o%wR)OURP}!O%w!c!}%w#R#S%w#T#W%w#W#X)b#X#o%wR)iS{QRP}!O%w!c!}%w#R#S%w#T#o%wR)zURP}!O%w!c!}%w#R#S%w#T#V%w#V#W*^#W#o%wR*eS!PQRP}!O%w!c!}%w#R#S%w#T#o%wR*vURP}!O%w!c!}%w#R#S%w#T#m%w#m#n+Y#n#o%wR+aS}QRP}!O%w!c!}%w#R#S%w#T#o%wR+rURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y,U#Y#o%wR,ZURP}!O%w!c!}%w#R#S%w#T#g%w#g#h,m#h#o%wR,rURP}!O%w!c!}%w#R#S%w#T#V%w#V#W-U#W#o%wR-]S!OQRP}!O%w!c!}%w#R#S%w#T#o%wR-nTRP}!O%w!c!}%w#R#S%w#T#U-}#U#o%wR.SURP}!O%w!c!}%w#R#S%w#T#`%w#`#a.f#a#o%wR.kURP}!O%w!c!}%w#R#S%w#T#g%w#g#h.}#h#o%wR/SURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y/f#Y#o%wR/mSmQRP}!O%w!c!}%w#R#S%w#T#o%wR0OURP}!O%w!c!}%w#R#S%w#T#b%w#b#c0b#c#o%wR0iSzQRP}!O%w!c!}%w#R#S%w#T#o%wR0zURP}!O%w!c!}%w#R#S%w#T#]%w#]#^1^#^#o%wR1cURP}!O%w!c!}%w#R#S%w#T#a%w#a#b1u#b#o%wR1zURP}!O%w!c!}%w#R#S%w#T#]%w#]#^2^#^#o%wR2cURP}!O%w!c!}%w#R#S%w#T#h%w#h#i2u#i#o%wR2|S!QQRP}!O%w!c!}%w#R#S%w#T#o%wR3_URP}!O%w!c!}%w#R#S%w#T#i%w#i#j3q#j#o%wR3vURP}!O%w!c!}%w#R#S%w#T#`%w#`#a4Y#a#o%wR4_URP}!O%w!c!}%w#R#S%w#T#`%w#`#a4q#a#o%wR4xSnQRP}!O%w!c!}%w#R#S%w#T#o%wR5ZURP}!O%w!c!}%w#R#S%w#T#f%w#f#g5m#g#o%wR5rURP}!O%w!c!}%w#R#S%w#T#W%w#W#X6U#X#o%wR6ZURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y6m#Y#o%wR6rURP}!O%w!c!}%w#R#S%w#T#f%w#f#g7U#g#o%wR7]S|QRP}!O%w!c!}%w#R#S%w#T#o%wR7nURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y8Q#Y#o%wR8VURP}!O%w!c!}%w#R#S%w#T#b%w#b#c8i#c#o%wR8nURP}!O%w!c!}%w#R#S%w#T#W%w#W#X9Q#X#o%wR9VURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y9i#Y#o%wR9nURP}!O%w!c!}%w#R#S%w#T#f%w#f#g:Q#g#o%wR:XS!TQRP}!O%w!c!}%w#R#S%w#T#o%wR:jURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y:|#Y#o%wR;RURP}!O%w!c!}%w#R#S%w#T#`%w#`#a;e#a#o%wR;jURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y;|#Y#o%wR<RURP}!O%w!c!}%w#R#S%w#T#V%w#V#W<e#W#o%wR<jURP}!O%w!c!}%w#R#S%w#T#h%w#h#i<|#i#o%wR=TS!RQRP}!O%w!c!}%w#R#S%w#T#o%wR=fURP}!O%w!c!}%w#R#S%w#T#f%w#f#g=x#g#o%wR=}URP}!O%w!c!}%w#R#S%w#T#i%w#i#j>a#j#o%wR>fURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y>x#Y#o%wR?PSlQRP}!O%w!c!}%w#R#S%w#T#o%wR?bURP}!O%w!c!}%w#R#S%w#T#[%w#[#]?t#]#o%wR?yURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y@]#Y#o%wR@bURP}!O%w!c!}%w#R#S%w#T#f%w#f#g@t#g#o%wR@yURP}!O%w!c!}%w#R#S%w#T#X%w#X#YA]#Y#o%wRAdSjQRP}!O%w!c!}%w#R#S%w#T#o%w\",\n  tokenizers: [0, 1],\n  topRules: {\"Program\":[0,1]},\n  tokenPrec: 0\n})\n","import { syscall } from \"./syscall\";\nimport { PageMeta } from \"../common/types\";\n\nexport async function listPages(unfiltered = false): Promise<PageMeta[]> {\n  return syscall(\"space.listPages\", unfiltered);\n}\n\nexport async function readPage(\n  name: string\n): Promise<{ text: string; meta: PageMeta }> {\n  return syscall(\"space.readPage\", name);\n}\n\nexport async function writePage(name: string, text: string): Promise<PageMeta> {\n  return syscall(\"space.writePage\", name, text);\n}\n\nexport async function deletePage(name: string): Promise<PageMeta> {\n  return syscall(\"space.deletePage\", name);\n}\n","declare global {\n  function syscall(name: string, ...args: any[]): Promise<any>;\n}\n\nexport const syscall = self.syscall;\n","import { insertAtCursor } from \"@silverbulletmd/plugos-silverbullet-syscall/editor\";\n\nconst dateMatchRegex = /(\\d{4}\\-\\d{2}\\-\\d{2})/g;\n\nexport function niceDate(d: Date): string {\n  return d.toISOString().split(\"T\")[0];\n}\n\nexport async function insertToday() {\n  await insertAtCursor(niceDate(new Date()));\n}\n\nexport async function insertTomorrow() {\n  let d = new Date();\n  d.setDate(d.getDate() + 1);\n  await insertAtCursor(niceDate(d));\n}\n","import { syscall } from \"./syscall\";\nimport { FilterOption } from \"../common/types\";\n\nexport function getCurrentPage(): Promise<string> {\n  return syscall(\"editor.getCurrentPage\");\n}\n\nexport function setPage(newName: string): Promise<void> {\n  return syscall(\"editor.setPage\", newName);\n}\n\nexport function getText(): Promise<string> {\n  return syscall(\"editor.getText\");\n}\n\nexport function getCursor(): Promise<number> {\n  return syscall(\"editor.getCursor\");\n}\n\nexport function getSelection(): Promise<{ from: number; to: number }> {\n  return syscall(\"editor.getSelection\");\n}\n\nexport function setSelection(from: number, to: number): Promise<void> {\n  return syscall(\"editor.setSelection\", from, to);\n}\n\nexport function save(): Promise<void> {\n  return syscall(\"editor.save\");\n}\n\nexport function navigate(name: string, pos?: number): Promise<void> {\n  return syscall(\"editor.navigate\", name, pos);\n}\n\nexport function reloadPage(): Promise<void> {\n  return syscall(\"editor.reloadPage\");\n}\n\nexport function openUrl(url: string): Promise<void> {\n  return syscall(\"editor.openUrl\", url);\n}\n\nexport function flashNotification(message: string): Promise<void> {\n  return syscall(\"editor.flashNotification\", message);\n}\n\nexport function filterBox(\n  label: string,\n  options: FilterOption[],\n  helpText: string = \"\",\n  placeHolder: string = \"\"\n): Promise<FilterOption | undefined> {\n  return syscall(\"editor.filterBox\", label, options, helpText, placeHolder);\n}\n\nexport function showRhs(\n  html: string,\n  script?: string,\n  flex = 1\n): Promise<void> {\n  return syscall(\"editor.showRhs\", html, script, flex);\n}\n\nexport function hideRhs(): Promise<void> {\n  return syscall(\"editor.hideRhs\");\n}\n\nexport function showLhs(\n  html: string,\n  script?: string,\n  flex = 1\n): Promise<void> {\n  return syscall(\"editor.showLhs\", html, script, flex);\n}\n\nexport function hideLhs(): Promise<void> {\n  return syscall(\"editor.hideLhs\");\n}\n\nexport function showBhs(\n  html: string,\n  script?: string,\n  flex = 1\n): Promise<void> {\n  return syscall(\"editor.showBhs\", html, script, flex);\n}\n\nexport function hideBhs(): Promise<void> {\n  return syscall(\"editor.hideBhs\");\n}\n\nexport function insertAtPos(text: string, pos: number): Promise<void> {\n  return syscall(\"editor.insertAtPos\", text, pos);\n}\n\nexport function replaceRange(\n  from: number,\n  to: number,\n  text: string\n): Promise<void> {\n  return syscall(\"editor.replaceRange\", from, to, text);\n}\n\nexport function moveCursor(pos: number): Promise<void> {\n  return syscall(\"editor.moveCursor\", pos);\n}\n\nexport function insertAtCursor(text: string): Promise<void> {\n  return syscall(\"editor.insertAtCursor\", text);\n}\n\nexport function matchBefore(\n  re: string\n): Promise<{ from: number; to: number; text: string } | null> {\n  return syscall(\"editor.matchBefore\", re);\n}\n\nexport function dispatch(change: any): Promise<void> {\n  return syscall(\"editor.dispatch\", change);\n}\n\nexport function prompt(\n  message: string,\n  defaultValue = \"\"\n): Promise<string | undefined> {\n  return syscall(\"editor.prompt\", message, defaultValue);\n}\n"],"names":[],"version":3,"file":"engine.test.js.map","sourceRoot":"../../../../"}